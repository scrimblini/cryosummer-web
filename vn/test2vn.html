<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="../css/style.css">
    <style>
body {
    text-align: center;
    font-family: Arial, sans-serif;
    background-color: #222;
    color: white;
}

#main-menu, #vn-container, #game-menu, #exit-prompt {
    margin-top: 50px;
}

button {
    margin: 10px;
    padding: 10px 20px;
    font-size: 18px;
    cursor: pointer;
}



#text-box {
    width: 100%;
    height: 80px;
    background: rgba(0, 0, 0, 0.7);
    color: white;
    position: absolute;
    bottom: 0;
    left: 0;
    padding: 10px;
    text-align: center;
    font-size: 18px;
}

#restart-screen {
    position: fixed;
    background: black;
    color: white;
    flex-direction: column;
    justify-content: center;
    align-items: center;
}

.hidden {
    display: none;
}

    </style>
    <title>Characters</title>
</head>
<body>
    <nav class="navbar navbar-expand-md navbar-dark navdark mb-4 fixed-top">
        <div class="container-fluid">
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarCollapse">
                <ul class="navbar-nav me-auto mb-2 mb-md-0">
                    <li class="nav-item">
                        <a class="nav-link" aria-current="page" href="../index.html">Home</a></li>
                    <li class="nav-item">
                        <a class="nav-link" aria-current="page" href="../char/index.html">Characters</a></li>
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="index.html">Demo</a></li>
                    <li class="nav-item">
                        <a class="nav-link" aria-current="page" href="../gallery/index.html">Gallery</a></li>
                    <li class="nav-item">
                        <a class="nav-link" aria-current="page" href="../news/index.html">News</a></li>
                    <li class="nav-item">
                        <a class="nav-link" aria-current="page" href="../shop/index.html">Shop</a></li>
                    <li class="nav-item">
                        <a class="nav-link" aria-current="page" href="../socials/index.html">Socials</a></li>
                    <li class="nav-item">
                        <a class="nav-link" aria-current="page" href="index.html">Contact us</a></li>
                </ul>
            </div>
        </div>
    </nav>
    

    <div class="cont-adapt">
        <div id="main-menu">
            <h1>Cryogenic Summer</h1>
            <button id="start-btn">Start</button>
            <button id="load-btn">Load</button>
        </div>
    
        <!-- Game Screen -->
        <div id="vn-container" style="display: none;">
            <img id="sprite" src="placeholder.png" alt="Character">
            <div id="text-box">
                <p id="dialogue">Click to start...</p>
            </div>
        </div>
    
        <!-- In-Game Menu -->
        <div id="game-menu" style="display: none;">
            <button id="save-btn">Save</button>
            <button id="load-btn-game">Load</button>
            <button id="exit-btn">Exit</button>
        </div>
    
        <!-- Exit Confirmation -->
        <div id="exit-prompt" style="display: none;">
            <p>Do you want to save before exiting?</p>
            <button id="save-exit">Yes</button>
            <button id="exit-no-save">No</button>
        </div>

        <div id="restart-screen" class="hidden">
            <p>End of Demo</p>
            <button id="restart-button">Start Over</button>
            <button id="main-menu-button">Main Menu</button>
        </div>
        
        

    </div>




    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script src="js/func.js"></script>
    <script>
    const scenes = [
    { text: "Hello, welcome to the story!", sprite: "../img/vnsprites/boznormal-wireup.png", background: "../img/vnsprites/bglab.png" },
    { text: "This is a visual novel demo.", sprite: "../img/vnsprites/bozconfused-wiredown.png", background: "" }, // Keeps previous background
    { text: "Click again to continue.", sprite: "../img/vnsprites/bozserious-wiredown.png", background: "../img/vnsprites/bgoutside.png" },
    { text: "End of demo!", sprite: "../img/vnsprites/empty.png", background: "" }
];

let currentScene = 0;
let currentBackground = "";
let currentSprite = "";
    
    // UI Elements
    const mainMenu = document.getElementById("main-menu");
    const gameMenu = document.getElementById("game-menu");
    const exitPrompt = document.getElementById("exit-prompt");
    
    const startBtn = document.getElementById("start-btn");
    const loadBtn = document.getElementById("load-btn");
    const saveBtn = document.getElementById("save-btn");
    const loadBtnGame = document.getElementById("load-btn-game");
    const exitBtn = document.getElementById("exit-btn");
    const saveExitBtn = document.getElementById("save-exit");
    const exitNoSaveBtn = document.getElementById("exit-no-save");
    
    const vnBox = document.getElementById("vn-container");
    const dialogue = document.getElementById("dialogue");
    const sprite = document.getElementById("sprite");
    
    const restartScreen = document.getElementById("restart-screen");
const restartButton = document.getElementById("restart-button");
const mainMenuButton = document.getElementById("main-menu-button");


restartButton.addEventListener("click", () => {
    restartScreen.classList.add("hidden");
    vnBox.style.display = "block";
    currentScene = 0;
    updateScene();
});

mainMenuButton.addEventListener("click", () => {
    restartScreen.classList.add("hidden");
    vnBox.style.display = "none";
    gameMenu.style.display = "none";
    mainMenu.style.display = "block";
});


    // Start Game
    startBtn.addEventListener("click", () => {
        mainMenu.style.display = "none";
        vnBox.style.display = "block";
        gameMenu.style.display = "block";
        currentScene = 0;
        updateScene();
    });
    
    // Load Game from Main Menu
    loadBtn.addEventListener("click", () => {
        loadBtn();
    });

    //they both do the same just have different ids so they both trigger this function
    function loadbtn () {
        let savedScene = localStorage.getItem("savedScene");
        if (savedScene !== null) {
            currentScene = parseInt(savedScene);
            mainMenu.style.display = "none";
            vnBox.style.display = "block";
            gameMenu.style.display = "block";
            updateScene();
        } else {
            alert("No save found!");
        }
    };
   //this is what would be used instead of using 2 different addeventlisteners for 2 diff buttons that do the same?
    
    // In-Game Save
    saveBtn.addEventListener("click", () => {
        localStorage.setItem("savedScene", currentScene);
        alert("Game Saved!");
    });
    
    // In-Game Load
    //can be the same as the other one?
    loadBtnGame.addEventListener("click", () => {
        loadBtn();
    });
    
    // Exit Button - Show Save Prompt
    exitBtn.addEventListener("click", () => {
        exitPrompt.style.display = "block";
    });
    
    // Save and Exit
    saveExitBtn.addEventListener("click", () => {
        localStorage.setItem("savedScene", currentScene);
        alert("Game Saved!");
        exitGame();
    });
    
    // Exit Without Saving
    exitNoSaveBtn.addEventListener("click", () => {
        exitGame();
    });
    
    // Exit Function
    function exitGame() {
        exitPrompt.style.display = "none";
        vnContainer.style.display = "none";
        gameMenu.style.display = "none";
        mainMenu.style.display = "block";
    }
    
    // Click to Progress Scenes
    vnBox.addEventListener("click", () => {
    if (currentScene < scenes.length - 1) {
        currentScene++;
        updateScene();
    } else {
        vnBox.style.display = "none";
        gameMenu.style.display = "none";
        restartScreen.classList.remove("hidden");//basically when it ends the vn box disappears
        //and the hidden class is removed for restart scr
        //vice versa when clicking restart/go to main menu
    }
});
    
    // Update Scene
    function updateScene() {
    if (currentScene < scenes.length) {
        let scene = scenes[currentScene];

        dialogue.innerText = scene.text;
        sprite.src = scene.sprite;

        // Only update background if a new one is provided
        if (scene.background) {
            currentBackground = scene.background;
            vnBox.style.backgroundImage = `url(${currentBackground})`;
        }

        if (scene.sprite) {
            currentSprite = scene.sprite;
        }
    }
}
    

    </script>
</body>
</html>
